# Pay2Slay Environment Example
# Copy to .env (never commit the filled-in .env) and adjust.
# Values marked REQUIRED must be set for non-dry-run / production.
# IMPORTANT: This file is loaded via python-dotenv from project root.

# --- Core Runtime ---
# SQLite default is used if unset; switch to Postgres for prod (e.g., postgresql+psycopg://user:pass@host/db)
DATABASE_URL=sqlite:///pay2slay.db
# HMAC secret for sessions & OAuth state (change to long random string in prod)
SESSION_SECRET=change-me-dev-secret
# API server port (default 8000, override for local dev)
# Start with: uvicorn src.api.app:create_app --factory --reload --port 3000
PORT=3000

# --- Mode Flags ---
# true => external integrations mocked (no real outbound calls & deterministic mappings)
# false => requires proper OAuth state management (see /auth/discord/login endpoint)
P2S_DRY_RUN=true
# Enable demo endpoints (seed, demo-login, run-scheduler) even in non-dry-run mode
DEMO_MODE=1
# Optionally override configs dir (rare)
# CONFIG_DIR=/app/configs

# --- Discord OAuth (REQUIRED when serving real users) ---
# Ensure these values are loaded: python -c "import os; print(os.getenv('DISCORD_CLIENT_ID'))"
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
# Public callback that Discord redirects to (must match application settings)
# For local dev: http://localhost:8000/auth/discord/callback
# For production: https://yourdomain.com/auth/discord/callback
DISCORD_REDIRECT_URI=http://localhost:8000/auth/discord/callback
# Space/comma not required; library reads scopes from YAML (integrations), kept here for clarity
DISCORD_OAUTH_SCOPES=identify,guilds
# Public Discord server invite link (shown on link-required page)
DISCORD_INVITE_URL=

# --- Yunite (REQUIRED when P2S_DRY_RUN=false) ---
YUNITE_API_KEY=
YUNITE_GUILD_ID=
YUNITE_BASE_URL=https://yunite.xyz/api

# --- Fortnite (REQUIRED when P2S_DRY_RUN=false) ---
FORTNITE_API_KEY=
FORTNITE_BASE_URL=https://fortnite-api.com/v2

# --- Banano ---
# RPC endpoint for real balance / send. Keep empty in dry-run to skip network calls.
BANANO_NODE_RPC=
# Minimum operator balance BAN to continue payouts (payouts suspended below)
MIN_OPERATOR_BALANCE_BAN=50
# Operator funding account (required when not dry-run to check balance)
P2S_OPERATOR_ACCOUNT=

# --- Observability (optional) ---
# Enable trace export (otherwise spans stay local/console)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
# PAY2SLAY_OTLP_ENDPOINT takes precedence if set (wrapper var)
# PAY2SLAY_METRICS_EXEMPLARS=1 to link sample metrics points to traces

# --- Performance / Tests ---
# Skip perf tests in CI: PAY2SLAY_SKIP_PERF=1
# Force region analytics override (coarse region code): P2S_REGION=na

# --- Admin Session (email is provided at login form) ---
# No direct config; uses SESSION_SECRET for signing.
# Comma-separated list of Discord usernames allowed to access admin panel
ADMIN_DISCORD_USERNAMES=

# --- Derived / Internal Notes ---
# integrations.yaml expands env vars like ${YUNITE_API_KEY}, ${DISCORD_CLIENT_ID}, etc.
# If you change variable names here, update configs/integrations.yaml accordingly.
