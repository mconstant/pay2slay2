# Політика конфіденційності

Дата набуття чинності: 25.09.2025

Ця Політика конфіденційності описує, як самостійний кран Pay2Slay ("Програмне забезпечення") обробляє дані користувачів. Мета — максимальна конфіденційність та мінімальне зберігання даних. Від розгортачів ("Операторів") очікується дотримання або покращення цих принципів.

## Керівні принципи
- Мінімізація даних: Зберігати лише те, що суворо необхідно для коректного розрахунку винагород, запобігання зловживанням та аудиту.
- Лише локально за замовчуванням: Телеметрія, рекламні та трекінгові маячки не відправляються зовнішнім сервісам. Всі метрики/трейси залишаються в інфраструктурі оператора, якщо не налаштовано інше.
- Ефемерність: Тимчасові або похідні дані (наприклад, стан сесії, тимчасові OAuth обміни) не зберігаються довше функціональної потреби.
- Прозорість для користувача: Категорії даних та цілі задокументовані нижче; прихована обробка відсутня.
- Дружній до відмови: Опціональні функції (експорт трейсингу, розширена аналітика) вимкнені, якщо оператор їх не увімкне.

## Категорії даних
| Категорія | Приклади | Призначення | Зберігання | Примітки |
|-----------|----------|-------------|------------|----------|
| Ідентифікація (Discord) | discord_user_id, username, прапорець членства в гільдії | Перевірка права на винагороди + атрибуція | До запиту на видалення облікового запису або очистки оператором | Привілейовані скоупи не запитуються, крім перевірки ідентичності та гільдії. |
| Ідентифікація (Fortnite) | epic_account_id | Зіставлення активності з користувачем для підрахунку вбивств | До видалення або від'єднання облікового запису | Отримано через маппінг Yunite; не передається зовні. |
| Гаманець | Адреса Banano (основна) | Доставка виплат | До від'єднання або видалення | Кілька адрес опціонально; лише основна для виплат. |
| Активність нагород | RewardAccrual (вбивства, сума, epoch_minute) | Розрахунок виплат / аудит зловживань | До розрахунку + (визначений оператором вікно аудиту) | Може бути скорочено після завершення виплати за вибором оператора. |
| Записи виплат | сума, tx_hash, статус, метадані спроб | Фінансова відповідальність / повторна спроба / розгляд спорів | Безстроково або за визначенням оператора | tx_hash може бути публічним в блокчейні. |
| Події верифікації | VerificationRecord (джерело, статус, мітки часу) | Відстеження історії верифікації / розгляд спорів | Ковзне вікно або безстроково за вибором оператора | Можна агресивно скорочувати (зберігати лише останню успішну). |
| Прапорці зловживань | flag_type, severity, detail | Захист справедливого використання / цілісності | До очищення або видалення користувача | Лише евристичні зведення; IP-адреси не зберігаються. |
| Записи донатів | DonationLedger (amount_ban, blocks_received, source) | Відстеження донатів спільноти, прогрес етапів | Безстроково або за визначенням оператора | Ідентичність донора не зберігається; лише суми. |
| Код регіону (приблизний) | напр., "eu", "na" | Аналітика зловживань, статистика розподілу виплат | Опціонально; можна вимкнути | Отримано з заголовка або приблизного маппінгу IP; ніколи точна геолокація. |
| Логи (структуровані) | назви подій, trace/span ID (якщо увімкнено) | Налагодження та аудит | Рекомендовано коротке зберігання (напр., 7–30 днів) | Виключення секретів через маскування. |
| Сесії | HMAC токен сесії (кукі) | Автентифікація подальших запитів | Лише в пам'яті / TTL кукі | Токени непрозорі та можуть бути відкликані очищенням кукі. |

## Що ми навмисно НЕ збираємо
- Без email, реального імені, дати народження, посвідчення особи, номера телефону.
- Без точної геолокації, збереження IP або сторонніх ідентифікаторів аналітики.
- Без поведінкового профілювання або маркетингової сегментації.
- Без біометричних або чутливих категорій даних.

## Опціональні / контрольовані оператором функції
| Функція | За замовчуванням | Вплив на конфіденційність | Пом'якшення |
|---------|------------------|---------------------------|-------------|
| Експорт OpenTelemetry | Вимкнено | Може експортувати спани (включає назви маршрутів, таймінги) | Тримайте ендпоінт експорту внутрішнім або залишайте вимкненим |
| Розширений регіональний middleware | Увімкнено (лише приблизний) | Мінімальний приблизний код регіону | Вимкніть через конфігурацію за потреби |
| Ендпоінт метрик (/metrics) | Увімкнено | Показує агреговані лічильники | Захистіть через мережеву політику / шлюз автентифікації |
| Трейсинг ID в логах | Увімкнено (локально) | Корелює події запитів | Уникайте експорту логів третім сторонам без перевірки |

## Контроль суб'єктів даних
Оператори повинні надати (через свій канал розгортання):
- Право на доступ: Ендпоінт або процес для перегляду користувачем збережених даних ідентичності та історії виплат (частково покрито існуючими ендпоінтами `/me/status`, `/me/payouts`).
- Право на видалення: Скрипт оператора або дія адміністратора для видалення (або анонімізації) користувача, каскадно до прив'язок гаманця, нарахувань (розрахованих), прапорців, сесій.
- Право на виправлення: Повторний запуск верифікації для оновлення маппінгу Epic (/me/reverify або ре-верифікація адміністратором).

## Заходи безпеки
- Токени сесій підписані HMAC секретом (не вгадуються; без PII всередині).
- Секрети маскуються в структурованих логах (`safe_dict`).
- Обмеження швидкості та евристики зловживань зменшують автоматизований скрапінг/перебір.
- Опціональна перевірка балансу оператора запобігає непередбаченим порожнім виплатам.

## Рекомендації щодо зберігання
| Дані | Рекомендований макс. термін | Метод утилізації |
|------|----------------------------|------------------|
| Необроблені рядки нарахувань | 30–90 днів після розрахунку | Видалити або зберегти лише агреговану статистику |
| Записи верифікації (старіші за останню успішну) | 30 днів | Очистити |
| Прапорці зловживань (вирішені) | 90 днів | Очистити |
| Логи | 7–30 днів | Ротація + знищення |
| TSDB метрик | 30–90 днів | Політика зберігання |

## Міжнародні передачі
Програмне забезпечення не передає дані за межі інфраструктури оператора, якщо це явно не налаштовано (напр., зовнішній ендпоінт трейсингу). Будь-які питання трансферу між регіонами залежать від вибору хостингу оператора. В коді не існує логіки автоматичної передачі за кордон.

## Дані дітей
Програмне забезпечення не призначене для збору вікових індикаторів; оператори повинні обмежити рекламу для відповідних аудиторій згідно з юрисдикцією.

## Зміни до цієї політики
Версіонується в системі контролю версій. Суттєві зміни повинні збільшувати Дату набуття чинності та підсумовувати відмінності в повідомленнях комітів.

## Контакти / Управління
Як самостійний проект, відповідальність за управління та відповідність лежить на кожному операторі. Внески спільноти для зміцнення конфіденційності вітаються через pull request.

## Швидкий чек-лист оператора
- [ ] Вимкніть експорт OTLP, якщо не потрібен
- [ ] Захистіть /metrics за автентифікацією або мережевою політикою
- [ ] Встановіть зберігання логів ≤30 днів
- [ ] Надайте задокументовану процедуру видалення користувача
- [ ] Періодично очищуйте розраховані нарахування та застарілі записи верифікації
- [ ] Перевіряйте конфігурації на випадкове розкриття секретів

---
Ця політика спрямована на максимальну конфіденційність з мінімальним тертям. Якщо ви можете видалити або анонімізувати більше, зберігаючи точність нагород — зробіть це та внесіть покращення.
